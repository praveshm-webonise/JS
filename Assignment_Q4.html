<html>
  <head>
    <script type="text/javascript">
      var username;
      var email;
      var userData=new Array();

      function clearFields(){
        document.getElementById("username").value = "";
        document.getElementById("email").value = "";
      }

      function storeform() {

        try{
          username=document.getElementById("username").value;
          email=document.getElementById("email").value;
          var dat=new Date();
          var user = { 'username': username, 'email': email, 'timestamp': dat };
          if(!isname(username)) {
            throw("Invalid Name");
           }
          if(!isemail(email)) {
            throw("Invalid Email");
          }
          userData.push(user);
          localStorage.setItem('userData', JSON.stringify(userData));

          clearFields();
      }catch(e) {
        alert(e);
      }
    }
        function isname(name) {
          var pattern = /^[0-9a-zA-Z ]*$/;
          return pattern.test(name);
      }

        function isemail(email) {
          var pattern =/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
          return pattern.test(email);
      }

        function show() {
          var retrievedObject = localStorage.getItem('userData');
          var jsn=JSON.parse(retrievedObject) || [];
          for (var i=0;i<jsn.length;i++) {
            document.write(jsn[i].username + " | " + jsn[i].email + " | " + jsn[i].timestamp+"<br>");
          }

      }
    </script>
  </head>
    <body>
      <form>
        Enter your name:
        <input type="text" id="username"/><br>
        Enter your email:
        <input type="text" id="email"/><br>
        <button type="button" onclick="storeform()">Add Record</button>
        <button type="button" onclick="show()">Show All Details</button>
      </form>
    </body>
</html>
